<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>JobEntry - Job Portal Website Template</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <meta content="" name="keywords" />
  <meta content="" name="description" />
  <!-- Favicon -->
  <link href="img/favicon.ico" rel="icon" />

  <!-- Google Web Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Inter:wght@700;800&display=swap"
    rel="stylesheet" />

  <!-- Icon Font Stylesheet -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- Libraries Stylesheet -->
  <link href="../lib/animate/animate.min.css" rel="stylesheet" />
  <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet" />

  <!-- Customized Bootstrap Stylesheet -->
  <link href="css/bootstrap.min.css" rel="stylesheet" />

  <!-- Template Stylesheet -->
  <link href="css/style.css" rel="stylesheet" />
</head>

<body>
  <div class="container-xxl bg-white p-0">
    <!-- Spinner Start -->
    <div id="spinner"
      class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
      <div class="spinner-border text-primary" style="width: 3rem; height: 3rem" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
    <!-- Spinner End -->

    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg bg-white navbar-light shadow sticky-top p-0">
      <a href="index.html" class="navbar-brand d-flex align-items-center text-center py-0 px-4 px-lg-5">
        <h1 class="m-0 text-primary">JobPortal</h1>
      </a>
      <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav ms-auto p-4 p-lg-0">
          <a href="index.html" class="nav-item nav-link active">Home</a>
          <a href="about.html" class="nav-item nav-link">About</a>
          <a href="job-list.html" class="nav-item nav-link">Jobs</a>
          <a href="category.html" class="nav-item nav-link">Job Category</a>
          <a href="contact.html" class="nav-item nav-link">Contact</a>
          <a href="login.html" id="authBtn" class="nav-item nav-link">Login</a>
        </div>
      </div>
    </nav>
    <!-- Navbar End -->

    <!-- Banner Start -->
    <div class="container-fluid p-0">
      <div class="position-relative" style="height: 100vh; overflow: hidden">
        <img class="img-fluid w-100 h-100 position-absolute top-0 start-0" src="./img/ca.jpg" alt=""
          style="object-fit: cover; z-index: 1" />
        <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center"
          style="background: rgba(43, 57, 64, 0.5); z-index: 2">
          <div class="container">
            <div class="row justify-content-start">
              <div class="col-10 col-lg-8">
                <h1 class="display-3 text-white animated slideInDown mb-4">
                  Discover Opportunities. Connect With Talent. Build Your
                  Future.
                </h1>
                <p class="fs-5 fw-medium text-white mb-4 pb-2">
                  Whether you're searching for your dream job or the right
                  candidate, our platform bridges the gap between opportunity
                  and talent. Simple. Direct. Effective.
                </p>
                <a href="#" class="btn btn-primary py-md-3 px-md-5 me-3 animated slideInLeft">Search A Job</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Banner End -->

    <!-- Search Start -->
    <div class="container-fluid bg-primary mb-5 wow fadeIn" data-wow-delay="0.1s" style="padding: 35px">
      <div class="container">
        <div class="row g-2">
          <div class="col-md-10">
            <div class="row g-2">
              <div class="col-md-4">
                <input type="text" class="form-control border-0" style="border-radius: 10px" placeholder="Keyword" />
              </div>
              <div class="col-md-4">
                <select id="searchCategory" class="form-select border-0" style="border-radius: 10px">
                  <option selected disabled>Category</option>
                </select>


              </div>
              <div class="col-md-4">
                <select id="searchLocation" class="form-select border-0" style="border-radius: 10px">
                  <option selected disabled>Location</option>
                </select>
              </div>
            </div>
          </div>
          <div class="col-md-2">
            <button class="btn btn-dark border-0 w-100" style="border-radius: 10px">
              Search
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Search End -->

    <!-- Category Start -->
    <div class="container-xxl py-5">
      <div class="container">
        <h1 class="text-center mb-5 wow fadeInUp" data-wow-delay="0.1s">
          Explore By Category
        </h1>
        <div class="row g-4">
          <!-- Agriculture & Environmental Sciences -->
          <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.1s">
            <a class="cat-item rounded p-4" href="agriculture.html">
              <i class="fa fa-3x fa-seedling text-primary mb-4"></i>
              <h6 class="mb-3">Agriculture</h6>
              <p class="mb-0">10 Vacancy</p>
            </a>
          </div>

          <!-- Civil Service -->
          <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.3s">
            <a class="cat-item rounded p-4" href="">
              <i class="fa fa-3x fa-university text-primary mb-4"></i>
              <h6 class="mb-3">Civil Service</h6>
              <p class="mb-0">10 Vacancy</p>
            </a>
          </div>

          <!-- Construction & Engineering -->
          <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.5s">
            <a class="cat-item rounded p-4" href="">
              <i class="fa fa-3x fa-hard-hat text-primary mb-4"></i>
              <h6 class="mb-3">Construction & Engineering</h6>
              <p class="mb-0">10 Vacancy</p>
            </a>
          </div>

          <!-- Finance, Banking & Accounting -->
          <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.7s">
            <a class="cat-item rounded p-4" href="">
              <i class="fa fa-3x fa-piggy-bank text-primary mb-4"></i>
              <h6 class="mb-3">Finance, Banking & Accounting</h6>
              <p class="mb-0">10 Vacancy</p>
            </a>
          </div>

          <!-- Healthcare & Medical Services -->
          <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.1s">
            <a class="cat-item rounded p-4" href="">
              <i class="fa fa-3x fa-user-md text-primary mb-4"></i>
              <h6 class="mb-3">Healthcare & Medical Services</h6>
              <p class="mb-0">10 Vacancy</p>
            </a>
          </div>

          <!-- ICT & Software Development -->
          <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.3s">
            <a class="cat-item rounded p-4" href="">
              <i class="fa fa-3x fa-laptop-code text-primary mb-4"></i>
              <h6 class="mb-3">ICT & Software Development</h6>
              <p class="mb-0">10 Vacancy</p>
            </a>
          </div>

          <!-- Teaching & Education -->
          <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.5s">
            <a class="cat-item rounded p-4" href="">
              <i class="fa fa-3x fa-book-reader text-primary mb-4"></i>
              <h6 class="mb-3">Teaching & Education</h6>
              <p class="mb-0">10 Vacancy</p>
            </a>
          </div>

          <!-- Tourism & Hospitality -->
          <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.7s">
            <a class="cat-item rounded p-4" href="">
              <i class="fa fa-3x fa-hotel text-primary mb-4"></i>
              <h6 class="mb-3">Tourism & Hospitality</h6>
              <p class="mb-0">10 Vacancy</p>
            </a>
          </div>
        </div>
      </div>
    </div>
    <!-- Category End -->

    <!-- About Start -->
    <div class="container-xxl py-5">
      <div class="container">
        <div class="row g-5 align-items-center">
          <div class="col-lg-6 wow fadeIn" data-wow-delay="0.1s">
            <div class="row g-2">
              <div class="col-6">
                <img class="img-fluid rounded w-100 h-100 object-fit-cover" src="./img/job-5382501.jpg" alt="" />
              </div>
              <div class="col-6">
                <img class="img-fluid rounded w-100 h-100 object-fit-cover" src="./img/connect 2.jpg" alt="" />
              </div>
              <div class="col-6">
                <img class="img-fluid rounded w-100 h-100 object-fit-cover" src="./img/connect.jpg" alt="" />
              </div>
              <div class="col-6">
                <img class="img-fluid rounded w-100 h-100 object-fit-cover" src="./img/build.jpg" alt="" />
              </div>
            </div>
          </div>
          <div class="col-lg-6 wow fadeIn" data-wow-delay="0.5s">
            <h1 class="mb-4">
              Explore Jobs, Connect Directly, Build Your Future.
            </h1>
            <p class="mb-4">
              Our platform provides open access to detailed job listings from
              trusted employers. Whether you're seeking your next opportunity
              or researching companies, we make it easy to explore roles and
              connect directly using verified contact information—no sign-up
              or application process required.
            </p>
            <p>
              <i class="fa fa-check text-primary me-3"></i>Browse job listings
              across roles, industries, and locations
            </p>
            <p>
              <i class="fa fa-check text-primary me-3"></i>Get full job
              details including responsibilities and requirements
            </p>
            <p>
              <i class="fa fa-check text-primary me-3"></i> Contact employers
              directly through provided phone or email
            </p>
            <a class="btn btn-primary py-3 px-5 mt-3" href="">Read More</a>
          </div>
        </div>
      </div>
    </div>
    <!-- About End -->

    <!-- Jobs Start -->
    <div class="container-xxl py-5">
      <div class="container">
        <h1 class="text-center mb-5 wow fadeInUp" data-wow-delay="0.1s">
          Job Listing
        </h1>
        <div class="tab-class text-center wow fadeInUp" data-wow-delay="0.3s">
          <div class="job-item p-4 mb-4">
            <div class="row g-4">
              <div class="col-sm-12 col-md-8 d-flex align-items-center">
                <div class="text-start ps-4">
                  <h5 class="mb-3">Administrative Assistant</h5>
                  <span class="text-truncate me-3"><i class="fa fa-map-marker-alt text-primary me-2"></i>Phuentsholing,
                    Bhutan</span>
                  <span class="text-truncate me-3"><i class="far fa-clock text-primary me-2"></i>Contract</span>
                  <span class="text-truncate me-0"><i class="far fa-money-bill-alt text-primary me-2"></i>Nu. 18,000 –
                    22,000</span>
                </div>
              </div>
              <div
                class="col-sm-12 col-md-4 d-flex flex-column align-items-start align-items-md-end justify-content-center">
                <a class="btn btn-primary mb-3" href="job-detail.html">View Details</a>
                <small class="text-truncate"><i class="far fa-calendar-alt text-primary me-2"></i>Posted: 01 May,
                  2025</small>
              </div>
            </div>
          </div>

          <div class="job-item p-4 mb-4">
            <div class="row g-4">
              <div class="col-sm-12 col-md-8 d-flex align-items-center">
                <div class="text-start ps-4">
                  <h5 class="mb-3">Sales Person</h5>
                  <span class="text-truncate me-3"><i class="fa fa-map-marker-alt text-primary me-2"></i>Gelephu,
                    Bhutan</span>
                  <span class="text-truncate me-3"><i class="far fa-clock text-primary me-2"></i>Part
                    Time</span>
                  <span class="text-truncate me-0"><i class="far fa-money-bill-alt text-primary me-2"></i>Nu. 10,000 –
                    15,000</span>
                </div>
              </div>
              <div
                class="col-sm-12 col-md-4 d-flex flex-column align-items-start align-items-md-end justify-content-center">
                <a class="btn btn-primary mb-3" href="job-detail.html">View Details</a>
                <small class="text-truncate"><i class="far fa-calendar-alt text-primary me-2"></i>Posted: 28 April,
                  2025</small>
              </div>
            </div>
          </div>

          <div class="job-item p-4 mb-4">
            <div class="row g-4">
              <div class="col-sm-12 col-md-8 d-flex align-items-center">
                <div class="text-start ps-4">
                  <h5 class="mb-3">ICT Technician</h5>
                  <span class="text-truncate me-3"><i class="fa fa-map-marker-alt text-primary me-2"></i>Thimphu,
                    Bhutan</span>
                  <span class="text-truncate me-3"><i class="far fa-clock text-primary me-2"></i>Full
                    Time</span>
                  <span class="text-truncate me-0"><i class="far fa-money-bill-alt text-primary me-2"></i>Nu. 25,000 –
                    35,000</span>
                </div>
              </div>
              <div
                class="col-sm-12 col-md-4 d-flex flex-column align-items-start align-items-md-end justify-content-center">
                <a class="btn btn-primary mb-3" href="job-detail.html">View Details</a>
                <small class="text-truncate"><i class="far fa-calendar-alt text-primary me-2"></i>Posted: 03 May,
                  2025</small>
              </div>
            </div>
          </div>

          <div class="job-item p-4 mb-4">
            <div class="row g-4">
              <div class="col-sm-12 col-md-8 d-flex align-items-center">
                <div class="text-start ps-4">
                  <h5 class="mb-3">Lecturer</h5>
                  <span class="text-truncate me-3"><i class="fa fa-map-marker-alt text-primary me-2"></i>GCIT,
                    Bhutan</span>
                  <span class="text-truncate me-3"><i class="far fa-clock text-primary me-2"></i>Full
                    Time</span>
                  <span class="text-truncate me-0"><i class="far fa-money-bill-alt text-primary me-2"></i>Nu. 35,000 –
                    45,000</span>
                </div>
              </div>
              <div
                class="col-sm-12 col-md-4 d-flex flex-column align-items-start align-items-md-end justify-content-center">
                <a class="btn btn-primary mb-3" href="job-detail.html">View Details</a>
                <small class="text-truncate"><i class="far fa-calendar-alt text-primary me-2"></i>Posted: 05 May,
                  2025</small>
              </div>
            </div>
          </div>

          <div class="job-item p-4 mb-4">
            <div class="row g-4">
              <div class="col-sm-12 col-md-8 d-flex align-items-center">
                <div class="text-start ps-4">
                  <h5 class="mb-3">Software Developer</h5>
                  <span class="text-truncate me-3"><i class="fa fa-map-marker-alt text-primary me-2"></i>TashiCell,
                    Bhutan</span>
                  <span class="text-truncate me-3"><i class="far fa-clock text-primary me-2"></i>Full
                    Time</span>
                  <span class="text-truncate me-0"><i class="far fa-money-bill-alt text-primary me-2"></i>Nu. 30,000 –
                    40,000</span>
                </div>
              </div>
              <div
                class="col-sm-12 col-md-4 d-flex flex-column align-items-start align-items-md-end justify-content-center">
                <a class="btn btn-primary mb-3" href="job-detail.html">View Details</a>
                <small class="text-truncate"><i class="far fa-calendar-alt text-primary me-2"></i>Posted: 04 May,
                  2025</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Jobs End -->

    <!-- Testimonial Start -->
    <!-- <div class="container-xxl py-5 wow fadeInUp" data-wow-delay="0.1s">
            <div class="container">
                <h1 class="text-center mb-5">Our Clients Say!!!</h1>
                <div class="owl-carousel testimonial-carousel">
                    <div class="testimonial-item bg-light rounded p-4">
                        <i class="fa fa-quote-left fa-2x text-primary mb-3"></i>
                        <p>Dolor et eos labore, stet justo sed est sed. Diam sed sed dolor stet amet eirmod eos labore diam</p>
                        <div class="d-flex align-items-center">
                            <img class="img-fluid flex-shrink-0 rounded" src="img/testimonial-1.jpg" style="width: 50px; height: 50px;">
                            <div class="ps-3">
                                <h5 class="mb-1">Client Name</h5>
                                <small>Profession</small>
                            </div>
                        </div>
                    </div>
                    <div class="testimonial-item bg-light rounded p-4">
                        <i class="fa fa-quote-left fa-2x text-primary mb-3"></i>
                        <p>Dolor et eos labore, stet justo sed est sed. Diam sed sed dolor stet amet eirmod eos labore diam</p>
                        <div class="d-flex align-items-center">
                            <img class="img-fluid flex-shrink-0 rounded" src="img/testimonial-2.jpg" style="width: 50px; height: 50px;">
                            <div class="ps-3">
                                <h5 class="mb-1">Client Name</h5>
                                <small>Profession</small>
                            </div>
                        </div>
                    </div>
                    <div class="testimonial-item bg-light rounded p-4">
                        <i class="fa fa-quote-left fa-2x text-primary mb-3"></i>
                        <p>Dolor et eos labore, stet justo sed est sed. Diam sed sed dolor stet amet eirmod eos labore diam</p>
                        <div class="d-flex align-items-center">
                            <img class="img-fluid flex-shrink-0 rounded" src="img/testimonial-3.jpg" style="width: 50px; height: 50px;">
                            <div class="ps-3">
                                <h5 class="mb-1">Client Name</h5>
                                <small>Profession</small>
                            </div>
                        </div>
                    </div>
                    <div class="testimonial-item bg-light rounded p-4">
                        <i class="fa fa-quote-left fa-2x text-primary mb-3"></i>
                        <p>Dolor et eos labore, stet justo sed est sed. Diam sed sed dolor stet amet eirmod eos labore diam</p>
                        <div class="d-flex align-items-center">
                            <img class="img-fluid flex-shrink-0 rounded" src="img/testimonial-4.jpg" style="width: 50px; height: 50px;">
                            <div class="ps-3">
                                <h5 class="mb-1">Client Name</h5>
                                <small>Profession</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
    <!-- Testimonial End -->

    <!-- Footer Start -->
    <!-- <div class="container-fluid bg-dark text-white footer pt-5 mt-5 wow fadeIn" data-wow-delay="0.1s">
            <div class="container py-5">
                <div class="row g-5">
                    <div class="col-lg-6 col-md-12">
                        <h5 class="text-white mb-3">Contact</h5>
                        <p class="mb-2"><i class="fa fa-map-marker-alt me-2"></i>Rewa, Madhya Pradesh, IND</p>
                        <p class="mb-2"><i class="fa fa-phone-alt me-2"></i>+91 99191 9191</p>
                        <p class="mb-2"><i class="fa fa-envelope me-2"></i>info@ajaykumar.com</p>
                    </div>
                    <div class="col-lg-6 col-md-12">
                        <h5 class="text-white mb-3">Newsletter</h5>
                        <p>Subscribe to receive the latest job updates.</p>
                        <div class="position-relative" style="max-width: 400px;">
                            <input class="form-control bg-transparent w-100 py-3 ps-4 pe-5" type="text"
                                placeholder="Your email">
                            <button type="button"
                                class="btn btn-primary py-2 position-absolute top-0 end-0 mt-2 me-2">Sign Up</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container border-top pt-4 mt-4">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <p class="mb-0">&copy; 2025 <a class="text-white" href="#">JobEntry</a>. All Rights Reserved.
                        </p>
                    </div>
                </div>
            </div>
        </div> -->
    <footer class="custom-footer" style="
          background-color: #2b3940;
          color: #effdf5;
          padding: 40px 20px;
          font-family: 'Inter', sans-serif;
        ">
      <div class="footer-container" style="
            max-width: 1140px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 30px;
          ">
        <div class="footer-left">
          <p style="margin-bottom: 15px">
            <i class="fas fa-map-marker-alt" style="margin-right: 10px; color: #00b074"></i><strong>Thimphu,
              Bhutan</strong>
          </p>
          <p style="margin-bottom: 15px">
            <i class="fas fa-phone-alt" style="margin-right: 10px; color: #00b074"></i>
            <strong>+975 12345678</strong>
          </p>
          <p style="margin-bottom: 0">
            <i class="fas fa-envelope" style="margin-right: 10px; color: #00b074"></i>
            <a href="mailto:support@company.com" style="color: #00b074; text-decoration: none">support@company.com</a>
          </p>
        </div>
        <div class="footer-right mt-4 mt-md-0">
          <h5 style="font-weight: 600; margin-bottom: 10px; color: #ffffff">
            About the Company
          </h5>
          <p style="font-size: 14px; color: #d1d5db; margin-bottom: 15px">
            We help bridge the gap between talent and opportunity through
            transparent and direct communication.
          </p>
          <div class="social-icons mt-3">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
            <a href="#"><i class="fab fa-github"></i></a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Footer End -->

    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
  </div>

  <!-- JavaScript Libraries -->
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="lib/wow/wow.min.js"></script>
  <script src="lib/easing/easing.min.js"></script>
  <script src="lib/waypoints/waypoints.min.js"></script>
  <script src="lib/owlcarousel/owl.carousel.min.js"></script>

  <!-- Template Javascript -->
  <script src="./js/main.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      validateAuthState(); // ✅ New function

      loadCategories();
      loadJobs();
      loadSearchFilters();
    });

    // ✅ Validate token with backend before deciding auth state
    async function validateAuthState() {
      const authBtn = document.getElementById("authBtn");
      const token = localStorage.getItem("token");

      if (!token || !authBtn) {
        authBtn.textContent = "Login";
        authBtn.href = "login.html";
        return;
      }

      try {
        const res = await fetch("http://localhost:5000/api/auth/me", {
          headers: { Authorization: `Bearer ${token}` },
        });

        if (!res.ok) throw new Error("Invalid token");

        // Token is valid
        authBtn.textContent = "Logout";
        authBtn.href = "#";
        authBtn.addEventListener("click", (e) => {
          e.preventDefault();
          localStorage.removeItem("token");
          window.location.reload(); // force refresh to reset UI
        });
      } catch (err) {
        // Token is invalid or expired
        console.warn("Auth validation failed:", err.message);
        localStorage.removeItem("token");
        authBtn.textContent = "Login";
        authBtn.href = "login.html";
      }
    }

    async function loadCategories() {
      try {
        const res = await fetch("http://localhost:5000/api/categories/public");
        const categories = await res.json();
        const container = document.querySelector(".row.g-4");
        container.innerHTML = "";

        const iconMap = {
          "Agriculture": "fa-seedling",
          "Civil Service": "fa-university",
          "Construction & Engineering": "fa-hard-hat",
          "Finance, Banking & Accounting": "fa-piggy-bank",
          "Healthcare & Medical Services": "fa-user-md",
          "ICT & Software Development": "fa-laptop-code",
          "Teaching & Education": "fa-book-reader",
          "Tourism & Hospitality": "fa-hotel",
        };

        categories.forEach((cat, idx) => {
          const delay = 0.1 + (idx % 4) * 0.2;
          const icon = iconMap[cat.name] || "fa-tags";

          container.innerHTML += `
          <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="${delay}s">
            <a class="cat-item rounded p-4" href="job-list.html?category=${cat._id}">
              <i class="fa fa-3x ${icon} text-primary mb-4"></i>
              <h6 class="mb-3">${cat.name}</h6>
              <p class="mb-0">${cat.count || 0} Vacancy</p>
            </a>
          </div>
        `;
        });
      } catch (err) {
        console.error("Failed to load categories", err);
      }
    }

    async function loadJobs() {
      try {
        const res = await fetch("http://localhost:5000/api/jobs/public");
        const jobs = await res.json();
        const container = document.querySelector(".tab-class.text-center");
        container.innerHTML = "";

        const token = localStorage.getItem("token");

        jobs.forEach(job => {
          const postedDate = new Date(job.createdAt).toLocaleDateString("en-GB");

          const actionBtn = token
            ? `<a class="btn btn-primary mb-3" href="job-detail.html?id=${job._id}">View Details</a>`
            : `<a class="btn btn-outline-primary mb-3" href="login.html">Login to View Details</a>`;

          container.innerHTML += `
        <div class="job-item p-4 mb-4">
          <div class="row g-4">
            <div class="col-sm-12 col-md-8 d-flex align-items-center">
              <div class="text-start ps-4">
                <h5 class="mb-3">${job.title}</h5>
                <span class="text-truncate me-3"><i class="fa fa-map-marker-alt text-primary me-2"></i>${job.location}</span>
                <span class="text-truncate me-3"><i class="far fa-clock text-primary me-2"></i>${job.type}</span>
                <span class="text-truncate me-0"><i class="far fa-money-bill-alt text-primary me-2"></i>${job.salary}</span>
              </div>
            </div>
            <div class="col-sm-12 col-md-4 d-flex flex-column align-items-start align-items-md-end justify-content-center">
              ${actionBtn}
              <small class="text-truncate"><i class="far fa-calendar-alt text-primary me-2"></i>Posted: ${postedDate}</small>
            </div>
          </div>
        </div>
      `;
        });
      } catch (err) {
        console.error("Failed to load jobs", err);
      }
    }


    async function loadSearchFilters() {
      try {
        const [catRes, jobRes] = await Promise.all([
          fetch("http://localhost:5000/api/categories/public"),
          fetch("http://localhost:5000/api/jobs/public"),
        ]);

        const categories = await catRes.json();
        const jobs = await jobRes.json();

        const catSelect = document.getElementById("searchCategory");
        const locSelect = document.getElementById("searchLocation");

        categories.forEach(cat => {
          const opt = document.createElement("option");
          opt.value = cat.name;
          opt.textContent = cat.name;
          catSelect.appendChild(opt);
        });

        const uniqueLocations = [...new Set(jobs.map(j => j.location))];
        uniqueLocations.forEach(loc => {
          const opt = document.createElement("option");
          opt.value = loc;
          opt.textContent = loc;
          locSelect.appendChild(opt);
        });
      } catch (err) {
        console.error("Failed to load search filters", err);
      }
    }
  </script>


</body>

</html>